<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PINCHY_ARMY :: MISSION_CONTROL</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-cyan: #00d4ff;
            --neon-purple: #7c5cff;
            --neon-pink: #ff6b9d;
            --dark-bg: #0a0a0f;
            --card-bg: rgba(255,255,255,0.03);
            --border: rgba(255,255,255,0.08);
            --text: #e0e0e0;
            --text-muted: #888;
            --success: #00ff88;
            --warning: #ffd700;
            --danger: #ff4757;
            --glow-cyan: 0 0 20px rgba(0,212,255,0.3);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--dark-bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* CRT Scanline Effect */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0,0,0,0.15),
                rgba(0,0,0,0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 9998;
            opacity: 0.3;
        }
        
        /* Login Overlay */
        #login-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .login-terminal {
            background: rgba(0,0,0,0.8);
            border: 1px solid var(--neon-cyan);
            border-radius: 8px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            box-shadow: var(--glow-cyan);
        }
        
        .terminal-header {
            color: var(--neon-cyan);
            font-size: 12px;
            margin-bottom: 20px;
            opacity: 0.7;
        }
        
        .login-prompt {
            margin-bottom: 15px;
        }
        
        .login-label {
            color: var(--neon-purple);
            margin-bottom: 8px;
        }
        
        #password-input {
            width: 100%;
            padding: 12px;
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--border);
            color: var(--neon-cyan);
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px;
            outline: none;
        }
        
        #password-input:focus {
            border-color: var(--neon-cyan);
            box-shadow: var(--glow-cyan);
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            background: transparent;
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s;
        }
        
        .login-btn:hover {
            background: var(--neon-cyan);
            color: var(--dark-bg);
            box-shadow: var(--glow-cyan);
        }
        
        #error-msg {
            color: var(--danger);
            margin-top: 15px;
            display: none;
        }
        
        /* Main Dashboard */
        .dashboard {
            display: none;
            padding: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        /* Header */
        .header {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 30px;
            align-items: center;
            padding: 20px;
            margin-bottom: 30px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-left: 3px solid var(--neon-cyan);
        }
        
        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .brand-icon {
            font-size: 40px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .brand-text h1 {
            font-size: 20px;
            color: var(--neon-cyan);
            letter-spacing: 2px;
        }
        
        .brand-text p {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-self: center;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .status-text {
            font-size: 11px;
            color: var(--success);
            text-transform: uppercase;
        }
        
        .header-stats {
            display: flex;
            gap: 30px;
        }
        
        .header-stat {
            text-align: right;
        }
        
        .header-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--neon-cyan);
        }
        
        .header-stat-label {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Live Update Indicator */
        .live-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(0,0,0,0.8);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 11px;
            z-index: 100;
        }
        
        .live-dot {
            width: 6px;
            height: 6px;
            background: var(--success);
            border-radius: 50%;
            animation: blink 1s infinite;
        }
        
        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 1200px) {
            .main-grid { grid-template-columns: 1fr; }
            .header { grid-template-columns: 1fr; gap: 15px; text-align: center; }
            .header-stats { justify-content: center; }
        }
        
        /* Terminal Window */
        .terminal-window {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .terminal-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border);
        }
        
        .terminal-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .terminal-btn.red { background: var(--danger); }
        .terminal-btn.yellow { background: var(--warning); }
        .terminal-btn.green { background: var(--success); }
        
        .terminal-title {
            flex: 1;
            text-align: center;
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
        }
        
        .terminal-body {
            padding: 20px;
            font-size: 13px;
        }
        
        /* Token Monitor */
        .token-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .token-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .token-card:hover {
            border-color: var(--neon-cyan);
            box-shadow: var(--glow-cyan);
        }
        
        .token-card.active {
            border-color: var(--neon-cyan);
            background: rgba(0,212,255,0.05);
        }
        
        .token-model {
            font-size: 10px;
            color: var(--neon-purple);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .token-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--neon-cyan);
            margin-bottom: 5px;
        }
        
        .token-cost {
            font-size: 11px;
            color: var(--text-muted);
        }
        
        /* Budget Bar */
        .budget-bar {
            margin-top: 15px;
        }
        
        .budget-label {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            margin-bottom: 8px;
            color: var(--text-muted);
        }
        
        .budget-track {
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .budget-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success) 0%, var(--warning) 70%, var(--danger) 100%);
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        /* Squad Status */
        .squad-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .squad-row {
            display: grid;
            grid-template-columns: auto 1fr auto auto;
            gap: 15px;
            align-items: center;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 6px;
            border-left: 3px solid var(--border);
            transition: all 0.3s;
        }
        
        .squad-row:hover {
            background: rgba(0,0,0,0.3);
            border-left-color: var(--neon-cyan);
        }
        
        .squad-row.active {
            border-left-color: var(--success);
        }
        
        .squad-avatar {
            font-size: 24px;
        }
        
        .squad-info {
            min-width: 0;
        }
        
        .squad-name {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 2px;
        }
        
        .squad-role {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
        }
        
        .squad-model {
            font-size: 10px;
            color: var(--neon-purple);
            background: rgba(124,92,255,0.1);
            padding: 4px 10px;
            border-radius: 10px;
            text-transform: uppercase;
        }
        
        .squad-tokens {
            font-size: 12px;
            color: var(--neon-cyan);
            font-family: 'JetBrains Mono', monospace;
            text-align: right;
        }
        
        .squad-last-active {
            font-size: 10px;
            color: var(--text-muted);
            text-align: right;
            margin-top: 2px;
        }
        
        .squad-last-active {
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 4px;
        }
        
        /* Task Lists */
        .task-section {
            margin-bottom: 15px;
        }
        
        .task-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }
        
        .task-count {
            background: var(--neon-cyan);
            color: var(--dark-bg);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 700;
        }
        
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .task-item:hover {
            background: rgba(0,0,0,0.3);
            transform: translateX(5px);
        }
        
        .task-priority {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }
        
        .task-priority.high { background: var(--danger); }
        .task-priority.medium { background: var(--warning); }
        .task-priority.low { background: var(--success); }
        
        .task-title {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .task-id {
            font-size: 10px;
            color: var(--text-muted);
        }
        
        /* Shells Section */
        .shells-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .shell-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            background: rgba(255,71,87,0.05);
            border: 1px solid rgba(255,71,87,0.2);
            border-radius: 6px;
        }
        
        .shell-icon {
            color: var(--danger);
        }
        
        .shell-content {
            flex: 1;
        }
        
        .shell-title {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 4px;
        }
        
        .shell-lesson {
            font-size: 11px;
            color: var(--warning);
            font-style: italic;
        }
        
        /* Bottom Grid */
        .bottom-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        
        @media (max-width: 900px) {
            .bottom-grid { grid-template-columns: 1fr; }
            .token-grid { grid-template-columns: 1fr; }
        }
        
        /* Loading State */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 40px;
            color: var(--text-muted);
        }
        
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--neon-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Error State */
        .error-state {
            text-align: center;
            padding: 40px;
            color: var(--danger);
        }
        
        .error-state button {
            margin-top: 15px;
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div id="login-overlay">
        <div class="login-terminal">
            <div class="terminal-header">
                <span style="color: var(--neon-cyan);">root@pinchy-army:~$</span>
            </div>
            <div class="login-prompt">
                <div class="login-label">AUTHENTICATION REQUIRED</div>
                <input type="password" id="password-input" placeholder="_" autocomplete="off">
            </div>
            <button class="login-btn" onclick="authenticate()">[ ENTER ]</button>
            <div id="error-msg">ACCESS DENIED: INVALID CREDENTIALS</div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="dashboard" id="dashboard">
        <!-- Header -->
        <div class="header">
            <div class="brand">
                <div class="brand-icon">ü¶Ä</div>
                <div class="brand-text">
                    <h1>PINCHY_ARMY_COMMAND</h1>
                    <p>v2.0.1 // LIVE_DATA_FEED</p>
                </div>
            </div>
            <div class="connection-status">
                <div class="status-dot"></div>
                <div class="status-text">LIVE CONNECTION</div>
            </div>
            <div class="header-stats">
                <div class="header-stat">
                    <div class="header-stat-value" id="stat-agents">--</div>
                    <div class="header-stat-label">Active Agents</div>
                </div>
                <div class="header-stat">
                    <div class="header-stat-value" id="stat-cost">--</div>
                    <div class="header-stat-label">Today's Cost</div>
                </div>
                <div class="header-stat">
                    <div class="header-stat-value" id="stat-missions">--</div>
                    <div class="header-stat-label">Missions</div>
                </div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Token Monitor -->
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="terminal-btn red"></div>
                    <div class="terminal-btn yellow"></div>
                    <div class="terminal-btn green"></div>
                    <div class="terminal-title">TOKEN_MONITOR.exe</div>
                </div>
                <div class="terminal-body">
                    <div class="token-grid" id="token-grid">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <span>INITIALIZING...</span>
                        </div>
                    </div>
                    <div class="budget-bar">
                        <div class="budget-label">
                            <span>DAILY BUDGET UTILIZATION</span>
                            <span id="budget-percent">--%</span>
                        </div>
                        <div class="budget-track">
                            <div class="budget-fill" id="budget-fill" style="width: 0%"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 10px; color: var(--text-muted);">
                            <span>$0.00</span>
                            <span>Target: $5.00</span>
                            <span>Weekly: $20.00</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Squad Status -->
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="terminal-btn red"></div>
                    <div class="terminal-btn yellow"></div>
                    <div class="terminal-btn green"></div>
                    <div class="terminal-title">SQUAD_STATUS.exe</div>
                </div>
                <div class="terminal-body">
                    <div class="squad-list" id="squad-list">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <span>LOADING SQUAD DATA...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Task Board -->
        <div class="main-grid">
            <!-- To Review -->
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="terminal-btn red"></div>
                    <div class="terminal-btn yellow"></div>
                    <div class="terminal-btn green"></div>
                    <div class="terminal-title">KANBAN://TO_REVIEW</div>
                </div>
                <div class="terminal-body">
                    <div class="task-list" id="todo-list">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <span>FETCHING TASKS...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- In Progress -->
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="terminal-btn red"></div>
                    <div class="terminal-btn yellow"></div>
                    <div class="terminal-btn green"></div>
                    <div class="terminal-title">KANBAN://IN_PROGRESS</div>
                </div>
                <div class="terminal-body">
                    <div class="task-list" id="progress-list">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <span>FETCHING TASKS...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Grid -->
        <div class="bottom-grid">
            <!-- Mission Stats -->
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="terminal-btn red"></div>
                    <div class="terminal-btn yellow"></div>
                    <div class="terminal-btn green"></div>
                    <div class="terminal-title">MISSION_STATS.exe</div>
                </div>
                <div class="terminal-body" id="mission-stats">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
            </div>

            <!-- Completed -->
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="terminal-btn red"></div>
                    <div class="terminal-btn yellow"></div>
                    <div class="terminal-btn green"></div>
                    <div class="terminal-title">KANBAN://COMPLETED</div>
                </div>
                <div class="terminal-body">
                    <div class="task-list" id="done-list">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shells -->
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="terminal-btn red"></div>
                    <div class="terminal-btn yellow"></div>
                    <div class="terminal-btn green"></div>
                    <div class="terminal-title">SHELLS_LEARNINGS.exe</div>
                </div>
                <div class="terminal-body">
                    <div class="shells-list" id="shells-list">
                        <div class="shell-item">
                            <div class="shell-icon">üíÄ</div>
                            <div class="shell-content">
                                <div class="shell-title">clickup-mockup-studio.jsonl</div>
                                <div class="shell-lesson">Task too complex ‚Äî split into smaller chunks next time</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Live Indicator -->
    <div class="live-indicator">
        <div class="live-dot"></div>
        <span>LIVE DATA // <span id="last-update">--:--</span></span>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            password: 'pinchy2026',
            dataUrl: './data.json',
            refreshInterval: 30000 // 30 seconds
        };

        let dashboardData = null;
        let refreshTimer = null;

        // Authentication
        function authenticate() {
            const input = document.getElementById('password-input').value;
            if (input === CONFIG.password) {
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                localStorage.setItem('pinchy_auth', 'true');
                initDashboard();
            } else {
                document.getElementById('error-msg').style.display = 'block';
                document.getElementById('password-input').value = '';
            }
        }

        // Check existing auth
        if (localStorage.getItem('pinchy_auth') === 'true') {
            document.getElementById('login-overlay').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            initDashboard();
        }

        // Enter key support
        document.getElementById('password-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') authenticate();
        });

        // Initialize Dashboard
        async function initDashboard() {
            await loadData();
            refreshTimer = setInterval(loadData, CONFIG.refreshInterval);
        }

        // Load Data from JSON
        async function loadData() {
            try {
                const response = await fetch(CONFIG.dataUrl + '?t=' + Date.now());
                if (!response.ok) throw new Error('Failed to load');
                
                dashboardData = await response.json();
                renderDashboard();
                updateTimestamp();
                
            } catch (error) {
                console.error('Data load failed:', error);
                showError();
            }
        }

        // Render Dashboard
        function renderDashboard() {
            if (!dashboardData) return;

            // Header Stats
            document.getElementById('stat-agents').textContent = dashboardData.dashboard?.activeAgents || '--';
            document.getElementById('stat-cost').textContent = dashboardData.dashboard?.todayCost || '--';
            document.getElementById('stat-missions').textContent = dashboardData.dashboard?.missionsToday || '--';

            // Token Usage
            renderTokens(dashboardData.tokens);

            // Squad Status
            renderSquad(dashboardData.squad);

            // Kanban Tasks
            if (dashboardData.kanban) {
                renderTaskList('todo-list', dashboardData.kanban.toReview, 'review');
                renderTaskList('progress-list', dashboardData.kanban.inProgress, 'progress');
                renderTaskList('done-list', dashboardData.kanban.completed, 'done');
            }

            // Mission Stats
            renderMissionStats(dashboardData);
        }

        // Render Token Cards
        function renderTokens(tokens) {
            const container = document.getElementById('token-grid');
            if (!tokens) return;

            let totalCost = 0;
            let html = '';

            Object.entries(tokens).forEach(([key, data]) => {
                const isActive = data.input > 0 || data.output > 0;
                const cost = parseFloat(data.cost?.replace('$', '') || 0);
                totalCost += cost;

                html += `
                    <div class="token-card ${isActive ? 'active' : ''}">
                        <div class="token-model">${data.model}</div>
                        <div class="token-value">${((data.input + data.output) / 1000).toFixed(1)}K</div>
                        <div class="token-cost">${data.cost}</div>
                    </div>
                `;
            });

            container.innerHTML = html;

            // Update Budget Bar
            const budgetPercent = (totalCost / 5) * 100;
            document.getElementById('budget-percent').textContent = budgetPercent.toFixed(0) + '%';
            document.getElementById('budget-fill').style.width = Math.min(budgetPercent, 100) + '%';
        }

        // Render Squad
        function renderSquad(squad) {
            const container = document.getElementById('squad-list');
            if (!squad) return;

            container.innerHTML = squad.map(agent => `
                <div class="squad-row ${agent.status}">
                    <div class="squad-avatar">${agent.avatar}</div>
                    <div class="squad-info">
                        <div class="squad-name">${agent.name}</div>
                        <div class="squad-role">${agent.role}</div>
                    </div>
                    <div class="squad-model">${agent.model}</div>
                    <div>
                        <div class="squad-tokens">${agent.tokens}</div>
                        <div class="squad-last-active">${agent.lastActive ? 'Last: ' + agent.lastActive : ''}</div>
                    </div>
                </div>
            `).join('');
        }

        // Render Task List
        function renderTaskList(elementId, tasks, type) {
            const container = document.getElementById(elementId);
            if (!tasks || tasks.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--text-muted);">NO TASKS</div>';
                return;
            }

            container.innerHTML = tasks.map(task => `
                <div class="task-item">
                    <div class="task-priority ${task.priority}"></div>
                    <div class="task-title">${task.title}</div>
                    <div class="task-id">${task.id}</div>
                </div>
            `).join('');
        }

        // Render Mission Stats
        function renderMissionStats(data) {
            const container = document.getElementById('mission-stats');
            const stats = data.kanban?.stats || {};

            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <div style="text-align: center; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 6px;">
                        <div style="font-size: 28px; color: var(--neon-cyan); font-weight: 700;">${stats.total || 0}</div>
                        <div style="font-size: 10px; color: var(--text-muted); margin-top: 5px;">TOTAL TASKS</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 6px;">
                        <div style="font-size: 28px; color: var(--success); font-weight: 700;">${stats.done || 0}</div>
                        <div style="font-size: 10px; color: var(--text-muted); margin-top: 5px;">COMPLETED</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 6px;">
                        <div style="font-size: 28px; color: var(--warning); font-weight: 700;">${stats.inProgress || 0}</div>
                        <div style="font-size: 10px; color: var(--text-muted); margin-top: 5px;">IN PROGRESS</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 6px;">
                        <div style="font-size: 28px; color: var(--neon-purple); font-weight: 700;">${stats.todo || 0}</div>
                        <div style="font-size: 10px; color: var(--text-muted); margin-top: 5px;">TO REVIEW</div>
                    </div>
                </div>
            `;
        }

        // Update Timestamp
        function updateTimestamp() {
            const now = new Date();
            document.getElementById('last-update').textContent = 
                now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
        }

        // Show Error
        function showError() {
            document.querySelectorAll('.terminal-body').forEach(el => {
                if (el.querySelector('.loading')) {
                    el.innerHTML = `
                        <div class="error-state">
                            <div style="font-size: 24px; margin-bottom: 10px;">‚ö†Ô∏è</div>
                            <div>DATA FEED INTERRUPTED</div>
                            <button onclick="loadData()">[ RETRY CONNECTION ]</button>
                        </div>
                    `;
                }
            });
        }

        // Console Easter Egg
        console.log('%cü¶Ä PINCHY_ARMY_COMMAND v2.0', 'color: #00d4ff; font-size: 20px; font-weight: bold;');
        console.log('%cLIVE DATA DASHBOARD', 'color: #7c5cff; font-size: 12px;');
        console.log('Access code: pinchy2026');
    </script>
</body>
</html>